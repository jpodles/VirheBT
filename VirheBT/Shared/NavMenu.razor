@using VirheBT.Shared.Components

@inject State.ProjectState projectState

<AuthorizeView>
    <Authorized>

        <Bar Breakpoint="Breakpoint.Desktop" NavigationBreakpoint="Breakpoint.Tablet"
             Mode="BarMode.VerticalInline" CollapseMode="BarCollapseMode.Small"
             Style="background-color: #ECECEC">
            <BarBrand>
                <BarItem>
                    <BarLink To="#">
                        <BarIcon IconName="IconName.Bug" />
                        VirheBT
                    </BarLink>
                </BarItem>
            </BarBrand>

            <BarMenu>

                <BarStart>

                    @if (projectState.CurrentProjectId != 0)
                    {
                        <BarItem>
                            <BarLink To="/" Class="activated">
                                <BarIcon IconName="IconName.Dashboard" />
                                Dashboard
                            </BarLink>
                        </BarItem>
                        <BarItem>
                            <BarLink To="/issues">
                                <BarIcon IconName="IconName.ListUl" />
                                Issues
                            </BarLink>
                        </BarItem>
                        <BarItem>
                            <BarLink To="/team">
                                <BarIcon IconName="IconName.Users" />
                                My Team
                            </BarLink>
                        </BarItem>

                    }

                    <BarItem>
                        <BarItem>
                            <BarLink To="/projects">
                                <BarIcon IconName="IconName.Code" />
                                My Projects
                            </BarLink>
                        </BarItem>
                    </BarItem>



                    @if (projectState.CurrentProjectId != 0)
                    {
                        <Divider></Divider>
                        <BarItem>
                            <BarLink @onclick="() => CreateIssueModal.ShowCreateIssueModal()">
                                <BarIcon IconName="IconName.Add" />
                                Create Issue
                            </BarLink>
                        </BarItem>
                        <Divider></Divider>
                    }
                </BarStart>





            </BarMenu>
            <BarToggler />
        </Bar>
    </Authorized>
</AuthorizeView>

<CreateIssue @ref="CreateIssueModal"></CreateIssue>

@code {
    private CreateIssue CreateIssueModal { get; set; }
}